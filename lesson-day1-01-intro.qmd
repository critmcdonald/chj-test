---
title: "Introduction"
author: "Christian McDonald"
---

## Welcome to the Center for Health Journalism R course.

The purpose of this first module is to:

- Get you familiar with RStudio, the program we use to write R code.
- Introduce Quarto documents, which allow you to write notes and code together in the same document, just like this document that you are reading.

## About Quarto, R and scripted journalism

Before we dive into RStudio and programming and all that, I want to show you where we are heading, so you can "visualize success". We are teaching a method for data journalism that is repeatable, transparent and annotated. When you do your work, you should intersperse notes and code, creating a document your future self can easily catch up on, or that you can share with others. The best way to explain this is to show you an example.

1.  Go to this link in a new browser window: [Major League Soccer salaries](https://christianmcdonald.quarto.pub/mls-salaries/).

This is a website with all the code from a data journalism project. If you click on the navigation link for [Cleaning](https://christianmcdonald.quarto.pub/mls-salaries/01-cleaning.html) you can read where the data come from and see all the steps I went through -- with code and explanation -- to process the data so I could work with it. And in the [Analysis 2023](https://christianmcdonald.quarto.pub/mls-salaries/02-analysis.html) notebook you'll see I set out with some questions for the data, and then I wrote the code to find my answers. Along with the way I wrote explanations of how and why I did what I did.

![Quarto Pub page](images/mls-analysis.png)

This website was created using Quarto and R, and the tool I used to write everything was RStudio.

This document you are reading also a Quarto document. Our lessons have explanations, instructions and code you can run right on your computer. You'll also be asked to write write and run some on your own code.

- The written words and explanations are written in a syntax called [Markdown](https://quarto.org/docs/authoring/markdown-basics.html). It's a common language used by programmers to create documentation. It's understandable as text, but also easily converted to other formats.
- The programming code for data is writing in R in code chunks. We'll introduce those in a moment.

### Render your first document

1. With this document open in R Studio, look at the toolbar directly above the writing and look for the **Render** button with the blue arrow next to it. Click on that word.
2. This will create (or render) a "publishable" version of this document in HTML and present it in the *Viewer* page (or perhaps in a new window, which we can fix).

You can read this lesson text there, but realize that rendered page doesn't update with edits in the Quarto document unless you tell it to.

Keep this in mind:

-   We can also easily publish the same work in other formats, like PDF, Word or even a slide show.
-   We can also choose NOT to "publish" our work. We don't *have* to share our work on the internet, we are just ready if we want to.

## RStudio tour

When you launch RStudio, you get a screen that looks like this:

![RStudio launch screen](images/intro-start.png)

Some things of note here:

- At the top-right of your RStudio window is a **Project** menu that should show the name of this project that you have open. If you click on the dropdown, you'll see other options.
    - We always want to be working in a project, which is basically a folder to hold your documents and data.
- Note the quadrant on the bottom right that includes the **Files**, **Help** and **Viewer** panes. You'll likely be flipping back and forth among those.
    - The **Files** pane shows all the documents in your project. This is where you go to open new documents in your project.
    - The **Help** pane allows us to search for help using R.
    - The **Viewer** pane is where our rendered documents display.

## Updating preferences

> I'm considering skipping this section entirely since we don't have much time - crit

There are some preferences in RStudio that I would like you to change. By default, the program wants to save the state of your work (all the variables and such) when you close a project, [but that is typically not good practice](https://www.r-bloggers.com/2017/04/using-r-dont-save-your-workspace/). We'll change that.

1.  Go to the **Tools** menu and choose **Global Options**.
2.  Under the **General** tab, uncheck the first four boxes.
3.  On the option "Save Workspace to .Rdata on exit", change that to **Never**.
4.  Click *Apply* to save the change (but don't close the box yet).

![RStudio preferences](images/rstudio-prefs.png)

Next we will set some value is the **Code** pane.

1.  On the left options, click on the **Code** pane.
2.  Check the box for **Use native pipe operator, \|\>**.
3.  Click **OK** to save and close the box.

![Native pipe preference](images/native_pipe_pref.png)

We'll get into why we did this part later.

## The R Package environment

R is an open-source language, which means that other programmers can contribute to how it works. It is what makes R beautiful.

What happens is developers will find it difficult to do a certain task, so they will write code that solves that problem and save it into an R "package" so they can use it later. They share that code with the community, and suddenly the R garage has an ["ultimate set of tools"](https://youtu.be/Y1En6FKd5Pk?t=24) that would make Spicoli's dad proud.

One set of these tools is the [tidyverse](https://www.tidyverse.org/) developed by Hadley Wickham and his team at Posit. It's a set of R packages for data science that are designed to work together. I highly recommend Wickham's book [R for data science](https://r4ds.hadley.nz/), which is free.

There are also a series of useful tidyverse [cheatsheets](https://rstudio.github.io/cheatsheets/) that can help you as you use the packages and functions from the tidyverse. We'll refer to these throughout the course.

### How we use packages

There are two steps to using an R package:

-   **Install the package** onto your computer by using `install.packages("package_name")`. You only have to do this once for each computer, so I usually do it using the R Console instead of in a notebook. *We installed most of ours already*.
-   **Include the library** using `library(package_name)`. This has to be done for **each notebook** or script that uses it, so it is usually one of the first things you'll see in a notebook.

::: callout-note
We use "quotes" around the package name when installing it, but we DON'T need quotes when we load it with `library(package_name)`.
:::

### Just in case



``` r
install.packages(c("quarto", "rmarkdown", "tidyverse", "janitor"))
```

You'll see a bunch of response fly by in the Console. It's probably all fine unless it ends the last response with an error.

## About R chunks

While you used the R console above to interact with R (yes, that is what you were doing), we will mostly add code to our notebooks using **code chunks**.

1. In this RStudio notebook in the code chunk below, click on the green **play** button to run the code in the chunk.
2. You should get a response something like `[1] 2` which is a row number `[1]` and the answer to the match equation `2`.

```{r}
1 + 1
```

There is a keyboard command to run a line of code, and it is among five key commands we really suggest you use. Presented for Mac:

- *Cmd-return* runs a single line of code that your cursor is on.
- *Cmd-shift-return* runs all the lines in the code chunk where your cursor is.

All of these options are also in the Run menu at the top of the document.

### OYO: Insert a code chunk

The best way to insert a new code chunk is to use the keyboard command *Cmd-option-i*. That said, there is also a green `+c` button above the document near that *Run* menu.

1. In the space below this direction but before the next headline, add a new code chunk using the keyboard command *Cmd-option-i*.
    - Notice it adds all the characters needed and then puts your cursor inside so you are ready to type.
2. Inside that code chunk, add `2 + 2` and then run the chunk to see the answer.
    



### Data frames and plots

There is a sample data set in R called `cars` that has the stopping distance of cars as measured some time in history. We'll use it to show a couple more things about code blocks.

The code chunk below has two lines of code:

- The first just says `cars`, which prints out the data.
- The second line is a function called `plot()` with `cars` inside of it. That function acts on the cars data to create a scatter plot.

1. Run the code below.

```{r}
cars

plot(cars)
```

Since we have two lines with two different outputs, the Quarto notebook shows them as panes you can swap back and forth. The rendered page shows each line of code, then its output.

- The `data.frame` part is printing out data. There is a lot of information available in that printout, including the number of rows (we call them observations) and columns (we call them variables), the names of those columns/variables, the data types of each variable, and then their values. We call data like this a "data frame" or "tibble". It's like a highly structured spreadsheet.
- The second pane is a chart (or plot as we call them). The function `plot()` took the only two variables in the data and, well, plotted them.

Yes, it can be that easy to visualize data in R. But not usually.

### OYO: Re-render this page one last time

Now that you've been introduced to how a Quarto document is written, go ahead and re-render this page by using the Render button or *Cmd-shift-k*.
